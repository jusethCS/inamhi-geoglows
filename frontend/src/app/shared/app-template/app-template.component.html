<!------------------------------------------------------------------------------->
<!--                        HEADER AND NAVBAR COMPONENT                        -->
<!------------------------------------------------------------------------------->

<div class="app-header d-flex justify-content-between">
  <div class="app-header-img d-flex align-items-center">
    <div class="d-flex justify-content-start">
      <div class="panel-button" (click)="toggleDropdown()">
        <fa-icon [icon]="faBars"></fa-icon>
      </div>
      <img [src]="imageUrl" alt="Card image" />
      <div class="d-flex align-items-center ms-3">
        <div class="app-header-title" style="font-size: 1.1rem">
          {{ appName }}
        </div>
      </div>
    </div>
  </div>

  <div class="app-header-title d-flex align-items-center">
    <div class="d-flex justify-content-start">

      <div class="header-button" (click)="showInfoModal()">
        <fa-icon [icon]="faCircleQuestion"></fa-icon>
      </div>

      <div class="header-button" (click)="showDataModal()">
        <fa-icon [icon]="faChartColumn"></fa-icon>
      </div>

      @if(isAuth){
      <div class="dropdown desktop-dropdown">
        <button
          class="btn dropdown-toggle btn-custom"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          <fa-icon [icon]="faUser"></fa-icon>
          {{ userFullName }}
        </button>
        <ul class="dropdown-menu">
          <li (click)="logout()">
            <a class="dropdown-item" href="/">Cerrar sesión</a>
          </li>
        </ul>
      </div>
      <div class="dropdown smartphone-dropdown">
        <button
          class="btn dropdown-toggle btn-custom"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          <fa-icon [icon]="faUser"></fa-icon>
        </button>
        <ul class="dropdown-menu">
          <li (click)="logout()">
            <a class="dropdown-item" href="/">Cerrar sesión</a>
          </li>
        </ul>
      </div>
      }@else {
      <div class="header-login">INICIAR SESIÓN</div>

      }

      <div class="header-button" (click)="redirectToApps()">
        <fa-icon [icon]="faXmark"></fa-icon>
      </div>
    </div>
  </div>
</div>



<!------------------------------------------------------------------------------->
<!--                                APP CONTENT                                -->
<!------------------------------------------------------------------------------->

<div class="app-content d-flex justify-content-start">
  <div [ngClass]="{
    'panel-active': isPanelActive,
    'panel-deactive': !isPanelActive}">
        <mat-accordion
          class="dark-mode"
          [ngClass]="{'panel-deactivate': !isPanelActive}" multi>
            <ng-content select="[panelContainer]"></ng-content>
        </mat-accordion>

        <div class="position-absolute bottom-0 start-0 reproductor"
              [ngClass]="{'panel-deactivate': !isPanelActive}">
          <ng-content select="[reprodContainer]"></ng-content>
        </div>
  </div>
  <div [ngClass]="{
    'map-partial': isPanelActive,
    'map-full': !isPanelActive}">
        <ng-content select="[mapContainer]"></ng-content>
  </div>
</div>



<!------------------------------------------------------------------------------->
<!--                               MODAL CONTENT                               -->
<!------------------------------------------------------------------------------->
<div class="modal fade" #dataModal id="panelModal" tabindex="-1"
      role="dialog" aria-labelledby="panel-modal-label">
  <div class="modal-dialog  modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <!-- HEADER -->
      <div class="modal-header w-100">
        <div class="modal-title  w-100" id="panel-modal-label">
          <div class="d-flex justify-content-between w-100">
            <div>
              <img src="assets/img/logos.png" class="img-log" />
            </div>
            <div class="d-flex align-items-center">
              <button type="button" class="btn-close"
                data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
          </div>
          <ng-content select="[dataModalHeader]"></ng-content>
        </div>
      </div>
      <!-- CONTENT -->
      <div id="modal-body-panel-custom" class="modal-body"
        style="min-width: 100% !important;">
          <ng-content select="[dataModalBody]"></ng-content>
      </div>
      <!-- FOOTER -->
      <div class="modal-footer">
        <button type="button" class="btn btn-primary btn-sm"
          data-bs-dismiss="modal" aria-label="Close">Cerrar</button>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" #infoModal id="panelModal" tabindex="-1"
      role="dialog" aria-labelledby="panel-modal-label-2">
  <div class="modal-dialog  modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <!-- HEADER -->
      <div class="modal-header w-100">
        <div class="modal-title  w-100" id="panel-modal-label-2">
          <div class="d-flex justify-content-between w-100">
            <div>
              {{ appName }}
            </div>
            <div class="d-flex align-items-center">
              <button type="button" class="btn-close"
                data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
          </div>
        </div>
      </div>
      <!-- CONTENT -->
      <div id="modal-body-panel-custom" class="modal-body"
        style="min-width: 100% !important;">
          <ng-content select="[infoModalBody]"></ng-content>
      </div>
      <!-- FOOTER -->
      <div class="modal-footer">
        <button type="button" class="btn btn-primary btn-sm"
          data-bs-dismiss="modal" aria-label="Close">Cerrar</button>
      </div>
    </div>
  </div>
</div>
